!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.QrCodeWithLogo=e():t.QrCodeWithLogo=e()}(window,function(){return n=[function(t,e){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||40<t)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return r[t]},e.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');n=t},e.isKanjiModeEnabled=function(){return void 0!==n},e.toSJIS=function(t){return n(t)}},function(t,n,e){const r=e(6),o=e(7);n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!r.isValid(e))throw new Error("Invalid version: "+e);return 1<=e&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},n.getBestModeForData=function(t){return o.testNumeric(t)?n.NUMERIC:o.testAlphanumeric(t)?n.ALPHANUMERIC:o.testKanji(t)?n.KANJI:n.BYTE},n.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},n.isValid=function(t){return t&&t.bit&&t.ccBits},n.from=function(t,e){if(n.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return e}}},function(t,e,n){"use strict";e.__esModule=!0,e.isImageDom=e.isString=e.isFunction=e.promisify=void 0,e.promisify=function(e){return function(){var t=Array.prototype.slice.call(arguments);return new Promise(function(n,r){t.push(function(t,e){t?r(t):n(e)}),e.apply(null,t)})}},e.isFunction=function(t){return"function"==typeof t},e.isString=function(t){return"string"==typeof t},e.isImageDom=function(t){return t&&["IMAGE","IMG"].includes(t.tagName)}},function(t,n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2},n.isValid=function(t){return t&&void 0!==t.bit&&0<=t.bit&&t.bit<4},n.from=function(t,e){if(n.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return e}}},function(t,e,n){"use strict";e.__esModule=!0,e.toCanvas=void 0;var r=n(10),o=n(33);e.toCanvas=function(t){return r.renderQrCode(t).then(function(){return o.drawLogo(t)})}},function(t,e,n){const r=n(3),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case r.L:return o[4*(t-1)+0];case r.M:return o[4*(t-1)+1];case r.Q:return o[4*(t-1)+2];case r.H:return o[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return i[4*(t-1)+0];case r.M:return i[4*(t-1)+1];case r.Q:return i[4*(t-1)+2];case r.H:return i[4*(t-1)+3];default:return}}},function(t,e){e.isValid=function(t){return!isNaN(t)&&1<=t&&t<=40}},function(t,e){let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");var r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+")(?:.|[\r\n]))+";e.KANJI=new RegExp(n,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(r,"g"),e.NUMERIC=new RegExp("[0-9]+","g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const o=new RegExp("^"+n+"$"),i=new RegExp("^[0-9]+$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return o.test(t)},e.testNumeric=function(t){return i.test(t)},e.testAlphanumeric=function(t){return a.test(t)}},function(t,g){function o(t){if("string"!=typeof(t="number"==typeof t?t.toString():t))throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||8<e.length)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:255&t,hex:"#"+e.slice(0,6).join("")}}g.getOptions=function(t){(t=t||{}).color||(t.color={});var e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,n=t.width&&21<=t.width?t.width:void 0,r=t.scale||4;return{width:n,scale:n?4:r,margin:e,color:{dark:o(t.color.dark||"#000000ff"),light:o(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},g.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},g.getImageWidth=function(t,e){var n=g.getScale(t,e);return Math.floor((t+2*e.margin)*n)},g.qrToImageData=function(r,t,o){var i=t.modules.size,a=t.modules.data,u=g.getScale(i,o),s=Math.floor((i+2*o.margin)*u),c=o.margin*u,l=[o.color.light,o.color.dark];for(let n=0;n<s;n++)for(let e=0;e<s;e++){var f,d,h=4*(n*s+e);let t=o.color.light;n>=c&&e>=c&&n<s-c&&e<s-c&&(f=Math.floor((n-c)/u),d=Math.floor((e-c)/u),t=l[a[f*i+d]?1:0]),r[h++]=t.r,r[h++]=t.g,r[h++]=t.b,r[h]=t.a}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,a,u,s){return new(u=u||Promise)(function(n,e){function r(t){try{i(s.next(t))}catch(t){e(t)}}function o(t){try{i(s.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}i((s=s.apply(t,a||[])).next())})},o=this&&this.__generator||function(n,r){var o,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){u.label=e[1];break}if(6===e[0]&&u.label<a[1]){u.label=a[1],a=e;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(e);break}a[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};e.__esModule=!0;var i=n(4),a=n(34),n=n(35).version,n=(u.prototype.toCanvas=function(){var t=this;return i.toCanvas.call(this,this.option).then(function(){return t.ifCanvasDrawed=!0,Promise.resolve()})},u.prototype.toImage=function(){return a.toImage.call(this,this.option)},u.prototype.downloadImage=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return this.ifImageCreated?[3,2]:[4,this.toImage()];case 1:t.sent(),t.label=2;case 2:return a.saveImage(this.option.image,e),[2]}})})},u.prototype.getCanvas=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return this.ifCanvasDrawed?[3,2]:[4,this.toCanvas()];case 1:t.sent(),t.label=2;case 2:return[2,this.option.canvas]}})})},u.version=n,u);function u(t){this.ifCanvasDrawed=!1,this.ifImageCreated=!1,this.defaultOption={canvas:document.createElement("canvas"),image:new Image,content:""},this.option=Object.assign(this.defaultOption,t)}e.default=n},function(t,e,n){"use strict";e.__esModule=!0,e.renderQrCode=void 0;var r=n(2),n=n(11),a=r.promisify(n.toCanvas);e.renderQrCode=function(t){var e=t.canvas,n=t.content,r=t.width,o=void 0===r?0:r,t=t.nodeQrCodeOptions,i=void 0===t?{}:t;return i.errorCorrectionLevel=i.errorCorrectionLevel||s(n),u(n,i).then(function(t){return i.scale=0===o?void 0:o/t*4,a(e,n,i)})};var u=function(t,e){var n=document.createElement("canvas");return a(n,t,e).then(function(){return n.width})},s=function(t){return 36<t.length?"M":16<t.length?"Q":"H"}},function(t,e,n){const s=n(12),c=n(13);var r=n(31);const o=n(32);function i(r,o,i,a,e){var t=[].slice.call(arguments,1),n=t.length,t="function"==typeof t[n-1];if(!t&&!s())throw new Error("Callback required as last argument");if(!t){if(n<1)throw new Error("Too few arguments provided");return 1===n?(i=o,o=a=void 0):2!==n||o.getContext||(a=i,i=o,o=void 0),new Promise(function(t,e){try{var n=c.create(i,a);t(r(n,o,a))}catch(t){e(t)}})}if(n<2)throw new Error("Too few arguments provided");2===n?(e=i,i=o,o=a=void 0):3===n&&(o.getContext&&void 0===e?(e=a,a=void 0):(e=a,a=i,i=o,o=void 0));try{var u=c.create(i,a);e(null,r(u,o,a))}catch(t){e(t)}}e.create=c.create,e.toCanvas=i.bind(null,r.render),e.toDataURL=i.bind(null,r.renderToDataURL),e.toString=i.bind(null,function(t,e,n){return o.render(t,n)})},function(t,e){t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},function(t,e,n){const A=n(0),i=n(3),a=n(14),u=n(15),s=n(16),c=n(17),l=n(18),M=n(5),N=n(19),f=n(22),d=n(23),h=n(1),g=n(24);function p(t,e,n){var r=t.size,o=d.getEncodedBits(e,n);let i,a;for(i=0;i<15;i++)a=1==(o>>i&1),i<6?t.set(i,8,a,!0):i<8?t.set(i+1,8,a,!0):t.set(r-15+i,8,a,!0),i<8?t.set(8,r-i-1,a,!0):i<9?t.set(8,15-i-1+1,a,!0):t.set(8,15-i-1,a,!0);t.set(r-8,8,1,!0)}function v(e,t,n){const r=new a;n.forEach(function(t){r.put(t.mode.bit,4),r.put(t.getLength(),h.getCharCountIndicator(t.mode,e)),t.write(r)});n=8*(A.getSymbolTotalCodewords(e)-M.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=n&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);var o=(n-r.getLengthInBits())/8;for(let t=0;t<o;t++)r.put(t%2?17:236,8);return function(t,e,n){const r=A.getSymbolTotalCodewords(e),o=M.getTotalCodewordsCount(e,n),i=r-o,a=M.getBlocksCount(e,n),u=r%a,s=a-u,c=Math.floor(r/a),l=Math.floor(i/a),f=l+1,d=c-l,h=new N(d);let g=0;const p=new Array(a),v=new Array(a);let m=0;const w=new Uint8Array(t.buffer);for(let t=0;t<a;t++){var y=t<s?l:f;p[t]=w.slice(g,g+y),v[t]=h.encode(p[t]),g+=y,m=Math.max(m,y)}const b=new Uint8Array(r);let E=0,C,I;for(C=0;C<m;C++)for(I=0;I<a;I++)C<p[I].length&&(b[E++]=p[I][C]);for(C=0;C<d;C++)for(I=0;I<a;I++)b[E++]=v[I][C];return b}(r,e,t)}function m(e,n,r,t){let o;if(Array.isArray(e))o=g.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let t=n;t||(i=g.rawSplit(e),t=f.getBestVersionForData(i,r)),o=g.fromString(e,t||40)}}var i=f.getBestVersionForData(o,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(n){if(n<i)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+i+".\n")}else n=i;e=v(n,r,o),i=A.getSymbolSize(n),i=new u(i);return function(n,t){var r=n.size,e=c.getPositions(t);for(let t=0;t<e.length;t++){var o=e[t][0],i=e[t][1];for(let e=-1;e<=7;e++)if(!(o+e<=-1||r<=o+e))for(let t=-1;t<=7;t++)i+t<=-1||r<=i+t||(0<=e&&e<=6&&(0===t||6===t)||0<=t&&t<=6&&(0===e||6===e)||2<=e&&e<=4&&2<=t&&t<=4?n.set(o+e,i+t,!0,!0):n.set(o+e,i+t,!1,!0))}}(i,n),function(e){var n=e.size;for(let t=8;t<n-8;t++){var r=t%2==0;e.set(t,6,r,!0),e.set(6,t,r,!0)}}(i),function(n,t){var e=s.getPositions(t);for(let t=0;t<e.length;t++){var r=e[t][0],o=e[t][1];for(let e=-2;e<=2;e++)for(let t=-2;t<=2;t++)-2===e||2===e||-2===t||2===t||0===e&&0===t?n.set(r+e,o+t,!0,!0):n.set(r+e,o+t,!1,!0)}}(i,n),p(i,r,0),7<=n&&function(e,t){var n,r,o,i=e.size,a=f.getEncodedBits(t);for(let t=0;t<18;t++)n=Math.floor(t/3),r=t%3+i-8-3,o=1==(a>>t&1),e.set(n,r,o,!0),e.set(r,n,o,!0)}(i,n),function(r,o){var t=r.size;let e=-1,i=t-1,a=7,u=0;for(let n=t-1;0<n;n-=2)for(6===n&&n--;;){for(let e=0;e<2;e++)if(!r.isReserved(i,n-e)){let t=!1;u<o.length&&(t=1==(o[u]>>>a&1)),r.set(i,n-e,t),a--,-1===a&&(u++,a=7)}if(i+=e,i<0||t<=i){i-=e,e=-e;break}}}(i,e),isNaN(t)&&(t=l.getBestMask(i,p.bind(null,i,r))),l.applyMask(t,i),p(i,r,t),{modules:i,version:n,errorCorrectionLevel:r,maskPattern:t,segments:o}}e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let n=i.M,r,o;return void 0!==e&&(n=i.from(e.errorCorrectionLevel,i.M),r=f.from(e.version),o=l.from(e.maskPattern),e.toSJISFunc&&A.setToSJISFunction(e.toSJISFunc)),m(t,r,n,o)}},function(t,e){function n(){this.buffer=[],this.length=0}n.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(e,n){for(let t=0;t<n;t++)this.putBit(1==(e>>>n-t-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=n},function(t,e){function n(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}n.prototype.set=function(t,e,n,r){e=t*this.size+e;this.data[e]=n,r&&(this.reservedBit[e]=!0)},n.prototype.get=function(t,e){return this.data[t*this.size+e]},n.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},n.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=n},function(t,e,n){const o=n(0).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];var e=Math.floor(t/7)+2,t=o(t),n=145===t?26:2*Math.ceil((t-13)/(2*e-2));const r=[t-7];for(let t=1;t<e-1;t++)r[t]=r[t-1]-n;return r.push(6),r.reverse()},e.getPositions=function(t){const n=[];var r=e.getRowColCoords(t),o=r.length;for(let e=0;e<o;e++)for(let t=0;t<o;t++)0===e&&0===t||0===e&&t===o-1||e===o-1&&0===t||n.push([r[e],r[t]]);return n}},function(t,e,n){const r=n(0).getSymbolSize;e.getPositions=function(t){t=r(t);return[[0,0],[t-7,0],[0,t-7]]}},function(t,u){u.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const c={N1:3,N2:3,N3:40,N4:10};u.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&0<=t&&t<=7},u.from=function(t){return u.isValid(t)?parseInt(t,10):void 0},u.getPenaltyN1=function(r){var t=r.size;let o=0,i=0,a=0,u=null,s=null;for(let n=0;n<t;n++){i=a=0,u=s=null;for(let e=0;e<t;e++){let t=r.get(n,e);t===u?i++:(5<=i&&(o+=c.N1+(i-5)),u=t,i=1),t=r.get(e,n),t===s?a++:(5<=a&&(o+=c.N1+(a-5)),s=t,a=1)}5<=i&&(o+=c.N1+(i-5)),5<=a&&(o+=c.N1+(a-5))}return o},u.getPenaltyN2=function(n){var r=n.size;let o=0;for(let e=0;e<r-1;e++)for(let t=0;t<r-1;t++){var i=n.get(e,t)+n.get(e,t+1)+n.get(e+1,t)+n.get(e+1,t+1);4!==i&&0!==i||o++}return o*c.N2},u.getPenaltyN3=function(n){var r=n.size;let o=0,i=0,a=0;for(let e=0;e<r;e++)for(let t=i=a=0;t<r;t++)i=i<<1&2047|n.get(e,t),10<=t&&(1488===i||93===i)&&o++,a=a<<1&2047|n.get(t,e),10<=t&&(1488===a||93===a)&&o++;return o*c.N3},u.getPenaltyN4=function(e){let n=0;var r=e.data.length;for(let t=0;t<r;t++)n+=e.data[t];return Math.abs(Math.ceil(100*n/r/5)-10)*c.N4},u.applyMask=function(n,r){var o=r.size;for(let e=0;e<o;e++)for(let t=0;t<o;t++)r.isReserved(t,e)||r.xor(t,e,function(t,e,n){switch(t){case u.Patterns.PATTERN000:return(e+n)%2==0;case u.Patterns.PATTERN001:return e%2==0;case u.Patterns.PATTERN010:return n%3==0;case u.Patterns.PATTERN011:return(e+n)%3==0;case u.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case u.Patterns.PATTERN101:return e*n%2+e*n%3==0;case u.Patterns.PATTERN110:return(e*n%2+e*n%3)%2==0;case u.Patterns.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}(n,t,e))},u.getBestMask=function(e,n){var r=Object.keys(u.Patterns).length;let o=0,i=1/0;for(let t=0;t<r;t++){n(t),u.applyMask(t,e);var a=u.getPenaltyN1(e)+u.getPenaltyN2(e)+u.getPenaltyN3(e)+u.getPenaltyN4(e);u.applyMask(t,e),a<i&&(i=a,o=t)}return o}},function(t,e,n){const o=n(20);function r(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(t){this.degree=t,this.genPoly=o.generateECPolynomial(this.degree)},r.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);var n=o.mod(e,this.genPoly),t=this.degree-n.length;if(0<t){const r=new Uint8Array(this.degree);return r.set(n,t),r}return n},t.exports=r},function(t,r,e){const i=e(21);r.mul=function(n,r){const o=new Uint8Array(n.length+r.length-1);for(let e=0;e<n.length;e++)for(let t=0;t<r.length;t++)o[e+t]^=i.mul(n[e],r[t]);return o},r.mod=function(t,e){let n=new Uint8Array(t);for(;0<=n.length-e.length;){var r=n[0];for(let t=0;t<e.length;t++)n[t]^=i.mul(e[t],r);let t=0;for(;t<n.length&&0===n[t];)t++;n=n.slice(t)}return n},r.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let t=0;t<e;t++)n=r.mul(n,new Uint8Array([1,i.exp(t)]));return n}},function(t,e){const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return r[t]},e.exp=function(t){return n[t]},e.mul=function(t,e){return 0===t||0===e?0:n[r[t]+r[e]]}},function(t,o,e){const i=e(0),a=e(5),r=e(3),u=e(1),s=e(6),n=i.getBCHDigit(7973);function c(t,e){return u.getCharCountIndicator(t,e)+4}function l(e,n){for(let t=1;t<=40;t++)if(function(t,n){let r=0;return t.forEach(function(t){var e=c(t.mode,n);r+=e+t.getBitsLength()}),r}(e,t)<=o.getCapacity(t,n,u.MIXED))return t}o.from=function(t,e){return s.isValid(t)?parseInt(t,10):e},o.getCapacity=function(t,e,n){if(!s.isValid(t))throw new Error("Invalid QR Code version");void 0===n&&(n=u.BYTE);e=8*(i.getSymbolTotalCodewords(t)-a.getTotalCodewordsCount(t,e));if(n===u.MIXED)return e;var r=e-c(n,t);switch(n){case u.NUMERIC:return Math.floor(r/10*3);case u.ALPHANUMERIC:return Math.floor(r/11*2);case u.KANJI:return Math.floor(r/13);default:u.BYTE;return Math.floor(r/8)}},o.getBestVersionForData=function(t,e){let n;e=r.from(e,r.M);if(Array.isArray(t)){if(1<t.length)return l(t,e);if(0===t.length)return 1;n=t[0]}else n=t;return function(e,n,r){for(let t=1;t<=40;t++)if(n<=o.getCapacity(t,r,e))return t}(n.mode,n.getLength(),e)},o.getEncodedBits=function(t){if(!s.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;0<=i.getBCHDigit(e)-n;)e^=7973<<i.getBCHDigit(e)-n;return t<<12|e}},function(t,e,n){const r=n(0),o=r.getBCHDigit(1335);e.getEncodedBits=function(t,e){e=t.bit<<3|e;let n=e<<10;for(;0<=r.getBCHDigit(n)-o;)n^=1335<<r.getBCHDigit(n)-o;return 21522^(e<<10|n)}},function(t,i,e){const f=e(1),o=e(25),a=e(26),u=e(27),s=e(29),c=e(7),l=e(0),d=e(30);function h(t){return unescape(encodeURIComponent(t)).length}function g(t,e,n){const r=[];for(var o;null!==(o=t.exec(n));)r.push({data:o[0],index:o.index,mode:e,length:o[0].length});return r}function p(t){const e=g(c.NUMERIC,f.NUMERIC,t);var n=g(c.ALPHANUMERIC,f.ALPHANUMERIC,t);let r,o;o=l.isKanjiModeEnabled()?(r=g(c.BYTE,f.BYTE,t),g(c.KANJI,f.KANJI,t)):(r=g(c.BYTE_KANJI,f.BYTE,t),[]);const i=e.concat(n,r,o);return i.sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function v(t,e){switch(e){case f.NUMERIC:return o.getBitsLength(t);case f.ALPHANUMERIC:return a.getBitsLength(t);case f.KANJI:return s.getBitsLength(t);case f.BYTE:return u.getBitsLength(t)}}function n(t,e){let n;var r=f.getBestModeForData(t);if(n=f.from(e,r),n!==f.BYTE&&n.bit<r.bit)throw new Error('"'+t+'" cannot be encoded with mode '+f.toString(n)+".\n Suggested mode is: "+f.toString(r));switch(n!==f.KANJI||l.isKanjiModeEnabled()||(n=f.BYTE),n){case f.NUMERIC:return new o(t);case f.ALPHANUMERIC:return new a(t);case f.KANJI:return new s(t);case f.BYTE:return new u(t)}}i.fromArray=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(n(e,null)):e.data&&t.push(n(e.data,e.mode)),t},[])},i.fromString=function(t,e){var n=function(t,n){const r={},o={start:{}};let i=["start"];for(let e=0;e<t.length;e++){var a=t[e];const l=[];for(let t=0;t<a.length;t++){var u=a[t],s=""+e+t;l.push(s),r[s]={node:u,lastCount:0},o[s]={};for(let t=0;t<i.length;t++){var c=i[t];r[c]&&r[c].node.mode===u.mode?(o[c][s]=v(r[c].lastCount+u.length,u.mode)-v(r[c].lastCount,u.mode),r[c].lastCount+=u.length):(r[c]&&(r[c].lastCount=u.length),o[c][s]=v(u.length,u.mode)+4+f.getCharCountIndicator(u.mode,n))}}i=l}for(let t=0;t<i.length;t++)o[i[t]].end=0;return{map:o,table:r}}(function(e){const n=[];for(let t=0;t<e.length;t++){var r=e[t];switch(r.mode){case f.NUMERIC:n.push([r,{data:r.data,mode:f.ALPHANUMERIC,length:r.length},{data:r.data,mode:f.BYTE,length:r.length}]);break;case f.ALPHANUMERIC:n.push([r,{data:r.data,mode:f.BYTE,length:r.length}]);break;case f.KANJI:n.push([r,{data:r.data,mode:f.BYTE,length:h(r.data)}]);break;case f.BYTE:n.push([{data:r.data,mode:f.BYTE,length:h(r.data)}])}}return n}(p(t,l.isKanjiModeEnabled())),e),r=d.find_path(n.map,"start","end");const o=[];for(let t=1;t<r.length-1;t++)o.push(n.table[r[t]].node);return i.fromArray(o.reduce(function(t,e){var n=0<=t.length-1?t[t.length-1]:null;return n&&n.mode===e.mode?t[t.length-1].data+=e.data:t.push(e),t},[]))},i.rawSplit=function(t){return i.fromArray(p(t,l.isKanjiModeEnabled()))}},function(t,e,n){const r=n(1);function o(t){this.mode=r.NUMERIC,this.data=t.toString()}o.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);var o=this.data.length-e;0<o&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,3*o+1))},t.exports=o},function(t,e,n){const r=n(1),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(t){this.mode=r.ALPHANUMERIC,this.data=t}i.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){var n=45*o.indexOf(this.data[e]);n+=o.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(o.indexOf(this.data[e]),6)},t.exports=i},function(t,e,n){const r=n(28),o=n(1);function i(t){this.mode=o.BYTE,this.data=new Uint8Array(r(t))}i.getBitsLength=function(t){return 8*t},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(n){for(let t=0,e=this.data.length;t<e;t++)n.put(this.data[t],8)},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){for(var e=[],n=t.length,r=0;r<n;r++){var o,i=t.charCodeAt(r);55296<=i&&i<=56319&&r+1<n&&(56320<=(o=t.charCodeAt(r+1))&&o<=57343&&(i=1024*(i-55296)+o-56320+65536,r+=1)),i<128?e.push(i):i<2048?(e.push(i>>6|192),e.push(63&i|128)):i<55296||57344<=i&&i<65536?(e.push(i>>12|224),e.push(i>>6&63|128),e.push(63&i|128)):65536<=i&&i<=1114111?(e.push(i>>18|240),e.push(i>>12&63|128),e.push(i>>6&63|128),e.push(63&i|128)):e.push(239,191,189)}return new Uint8Array(e).buffer}},function(t,e,n){const r=n(1),o=n(0);function i(t){this.mode=r.KANJI,this.data=t}i.getBitsLength=function(t){return 13*t},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let t=o.toSJIS(this.data[n]);if(33088<=t&&t<=40956)t-=33088;else{if(!(57408<=t&&t<=60351))throw new Error("Invalid SJIS character: "+this.data[n]+"\nMake sure your charset is UTF-8");t-=49472}t=192*(t>>>8&255)+(255&t),e.put(t,13)}},t.exports=i},function(t,e,n){"use strict";var h={single_source_shortest_paths:function(t,e,n){var r={},o={};o[e]=0;var i,a,u,s,c,l,f,d=h.PriorityQueue.make();for(d.push(e,0);!d.empty();)for(u in a=(i=d.pop()).value,s=i.cost,c=t[a]||{})c.hasOwnProperty(u)&&(l=s+c[u],f=o[u],(void 0===o[u]||l<f)&&(o[u]=l,d.push(u,l),r[u]=a));if(void 0===n||void 0!==o[n])return r;n=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(n)},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e;r;)n.push(r),t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){e=h.single_source_shortest_paths(t,e,n);return h.extract_shortest_path_from_predecessor_list(e,n)},PriorityQueue:{make:function(t){var e,n=h.PriorityQueue,r={};for(e in t=t||{},n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r.queue=[],r.sorter=t.sorter||n.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){this.queue.push({value:t,cost:e}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=h},function(t,i,e){const u=e(8);i.render=function(t,e,n){let r=n,o=e;void 0!==r||e&&e.getContext||(r=e,e=void 0),e||(o=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),r=u.getOptions(r);var i=u.getImageWidth(t.modules.size,r);const a=o.getContext("2d");n=a.createImageData(i,i);return u.qrToImageData(n.data,t,r),e=a,t=o,i=i,e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px",a.putImageData(n,0,0),o},i.renderToDataURL=function(t,e,n){let r=n;void 0!==r||e&&e.getContext||(r=e,e=void 0),r=r||{};const o=i.render(t,e,r);t=r.type||"image/png",e=r.rendererOpts||{};return o.toDataURL(t,e.quality)}},function(t,e,n){const a=n(8);function u(t,e){const n=t.a/255;t=e+'="'+t.hex+'"';return n<1?t+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':t}function l(t,e,n){let r=t+e;return void 0!==n&&(r+=" "+n),r}e.render=function(t,e,n){var r=a.getOptions(e),o=t.modules.size,i=t.modules.data,e=o+2*r.margin,t=r.color.light.a?"<path "+u(r.color.light,"fill")+' d="M0 0h'+e+"v"+e+'H0z"/>':"",o="<path "+u(r.color.dark,"stroke")+' d="'+function(e,n,r){let o="",i=0,a=!1,u=0;for(let t=0;t<e.length;t++){var s=Math.floor(t%n),c=Math.floor(t/n);s||a||(a=!0),e[t]?(u++,0<t&&0<s&&e[t-1]||(o+=a?l("M",s+r,.5+c+r):l("m",i,0),i=0,a=!1),s+1<n&&e[t+1]||(o+=l("h",u),u=0)):i++}return o}(i,o,r.margin)+'"/>',o='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+('viewBox="0 0 '+e+" "+e+'"')+' shape-rendering="crispEdges">'+t+o+"</svg>\n";return"function"==typeof n&&n(null,o),o}},function(t,e,n){"use strict";e.__esModule=!0,e.drawLogo=void 0;var g=n(2);e.drawLogo=function(t){var e=t.canvas,n=t.logo;if(!n)return Promise.resolve();if(""===n)return Promise.resolve();var r=e.width,o=n=g.isString(n)?{src:n}:n,i=o.logoSize,a=void 0===i?.15:i,u=o.borderColor,s=o.bgColor,t=void 0===s?(void 0===u?"#ffffff":u)||"#ffffff":s,i=o.borderSize,u=void 0===i?.05:i,s=o.crossOrigin,i=o.borderRadius,i=void 0===i?8:i,o=o.logoRadius,c=void 0===o?0:o,o="string"==typeof n?n:n.src,l=r*a,f=r*(1-a)/2,n=r*(a+u),u=r*(1-a-u)/2,d=e.getContext("2d");p(d)(u,u,n,n,i),d.fillStyle=t,d.fill();var h=new Image;h.setAttribute("crossOrigin",s||"anonymous"),h.src=o;return new Promise(function(n){h.onload=function(){var t,e;c?(t=h,(e=document.createElement("canvas")).width=f+l,e.height=f+l,e.getContext("2d").drawImage(t,f,f,l,l),p(d)(f,f,l,l,c),d.fillStyle=d.createPattern(e,"no-repeat"),d.fill()):d.drawImage(h,f,f,l,l),n()}})};var p=function(a){return function(t,e,n,r,o){var i=Math.min(n,r);return i/2<o&&(o=i/2),a.beginPath(),a.moveTo(t+o,e),a.arcTo(t+n,e,t+n,e+r,o),a.arcTo(t+n,e+r,t,e+r,o),a.arcTo(t,e+r,t,e,o),a.arcTo(t,e,t+n,e,o),a.closePath(),a}}},function(t,u,e){"use strict";var n=this&&this.__awaiter||function(t,a,u,s){return new(u=u||Promise)(function(n,e){function r(t){try{i(s.next(t))}catch(t){e(t)}}function o(t){try{i(s.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}i((s=s.apply(t,a||[])).next())})},s=this&&this.__generator||function(n,r){var o,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){u.label=e[1];break}if(6===e[0]&&u.label<a[1]){u.label=a[1],a=e;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(e);break}a[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};u.__esModule=!0,u.saveImage=u.toImage=void 0;var c=e(4),l=e(2);u.toImage=function(a){return n(this,void 0,void 0,function(){var e,n,r,o,i;return s(this,function(t){switch(t.label){case 0:return e=a.canvas,a.logo&&(l.isString(a.logo)&&(a.logo={src:a.logo}),a.logo.crossOrigin="Anonymous"),this.ifCanvasDrawed?[3,2]:[4,c.toCanvas(a)];case 1:t.sent(),t.label=2;case 2:if(o=a.image,n=void 0===o?new Image:o,i=a.downloadName,r=void 0===i?"qr-code":i,o=a.download,!e.toDataURL())throw new Error("Can not get the canvas DataURL");return(n.src=e.toDataURL(),(this.ifImageCreated=!0)===o||l.isFunction(o))?(i=function(){u.saveImage(n,r)},(o=!0===o?function(t){return t()}:o)&&o(i),[2,Promise.resolve()]):[2]}})})},u.saveImage=function(t,e){var n=t.src,t=document.createElement("a");t.download=e,t.href=n,t.dispatchEvent(new MouseEvent("click"))}},function(t){t.exports=JSON.parse('{"name":"qrcode-with-logos","version":"1.0.4","description":"","main":"lib/qrcode-with-logos.common.js","typings":"types/index.d.ts","module":"lib/qrcode-with-logos.esm.js","umd":"lib/qrcode-with-logos.js","jsdelivr":"doc/qrcode-with-logos.min.js","unpkg":"doc/qrcode-with-logos.min.js","className":"QrCodeWithLogo","scripts":{"test":"echo \\"Error: no test specified\\" && exit 1","start":"parcel ./index.html","build:lib":"rollup --config rollup.config.min.js && npm run build:rollup","build:rollup":"rollup -c","build":"webpack --config ./webpack.config.js"},"keywords":["qr-code","logo","image","qrCode","size"],"repository":{"type":"git","url":"git+https://github.com/zxpsuper/QRcode-with-logo.git"},"author":"suporka","license":"MIT","bugs":{"url":"https://github.com/zxpsuper/QRcode-with-logo/issues"},"homepage":"https://github.com/zxpsuper/QRcode-with-logo#readme","devDependencies":{"parcel-bundler":"^1.12.4","rollup":"^2.33.3","rollup-plugin-commonjs":"^10.1.0","rollup-plugin-json":"^4.0.0","rollup-plugin-node-polyfills":"^0.2.1","rollup-plugin-node-resolve":"^5.2.0","rollup-plugin-terser":"^7.0.2","rollup-plugin-typescript":"^1.0.1","ts-loader":"^8.0.12","tslib":"^2.0.3","typescript":"^3.5.2","uglifyjs-webpack-plugin":"^2.2.0","webpack":"^4.35.0","webpack-cli":"^3.3.5"},"dependencies":{"qrcode":"git+https://github.com/singpass/node-qrcode.git","rollup-plugin-babel":"^4.4.0"}}')}],r={},o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=9).default;function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var n,r});